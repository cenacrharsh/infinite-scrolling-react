(this["webpackJsonpinfinite-scrolling"]=this["webpackJsonpinfinite-scrolling"]||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(17),i=n.n(a),o=n(3),u=n(7),s=n(6),j=n.n(s);var b=n(2);var O=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(1),i=Object(o.a)(a,2),s=i[0],O=i[1],l=function(e,t){var n=Object(c.useState)(!0),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(!1),b=Object(o.a)(s,2),O=b[0],l=b[1],f=Object(c.useState)([]),d=Object(o.a)(f,2),h=d[0],g=d[1],v=Object(c.useState)(!1),p=Object(o.a)(v,2),x=p[0],S=p[1];return Object(c.useEffect)((function(){g([])}),[e]),Object(c.useEffect)((function(){var n;return i(!0),l(!1),j()({method:"GET",url:"http://openlibrary.org/search.json",params:{q:e,page:t},cancelToken:new j.a.CancelToken((function(e){return n=e}))}).then((function(e){g((function(t){return Object(u.a)(new Set([].concat(Object(u.a)(t),Object(u.a)(e.data.docs.map((function(e){return e.title}))))))})),S(e.data.docs.length>0),i(!1)})).catch((function(e){j.a.isCancel(e)||l(!0)})),function(){return n()}}),[e,t]),{loading:a,error:O,books:h,hasMore:x}}(n,s),f=l.loading,d=l.hasMore,h=l.books,g=l.error,v=Object(c.useRef)(),p=Object(c.useCallback)((function(e){f||(v.current&&v.current.disconnect(),v.current=new IntersectionObserver((function(e){e[0].isIntersecting&&d&&O((function(e){return e+1}))})),e&&v.current.observe(e))}),[f,d]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{type:"text",value:n,onChange:function(e){r(e.target.value),O(1)}}),h.map((function(e,t){return h.length===t+1?Object(b.jsx)("div",{ref:p,children:e},e):Object(b.jsx)("div",{children:e},e)})),Object(b.jsx)("div",{children:f&&"Loading..."}),Object(b.jsx)("div",{children:g&&"Error"})]})};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.445ba0f5.chunk.js.map